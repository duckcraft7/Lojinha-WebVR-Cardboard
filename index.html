<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR Open Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0a0a0c; color: #eee; font-family: sans-serif; overflow-x: hidden; }
        .card { background: #16161e; border: 1px solid #222; transition: 0.3s; }
        .card:hover { border-color: #3b82f6; transform: translateY(-5px); }
        #game-overlay { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: black; z-index: 9999; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body class="p-4">

    <div id="store-ui">
        <header class="text-center py-10">
            <h1 class="text-4xl font-black text-blue-500 uppercase tracking-tighter">VR HUB GITHUB</h1>
            <p class="text-gray-500 mt-2">Jogos WebXR para Google Cardboard & Android 15</p>
        </header>

        <main id="lista-jogos" class="max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            </main>
    </div>

    <div id="game-overlay">
        <button onclick="fecharJogo()" class="fixed top-4 left-4 z-[10000] bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-full font-bold shadow-2xl">
            âœ• SAIR DO JOGO
        </button>
        <iframe id="game-frame" allow="xr-spatial-tracking; accelerometer; gyroscope; magnetometer; mobile-sensor; fullscreen"></iframe>
    </div>

    <script>
        async function carregarLoja() {
            try {
                const response = await fetch('games.json');
                const jogos = await response.json();
                const container = document.getElementById('lista-jogos');

                container.innerHTML = jogos.map(jogo => `
                    <div class="card rounded-2xl overflow-hidden p-4 flex flex-col">
                        <img src="${jogo.capa}" class="rounded-xl h-48 w-full object-cover mb-4" alt="${jogo.titulo}">
                        <div class="flex-grow">
                            <h2 class="text-2xl font-bold text-white">${jogo.titulo}</h2>
                            <p class="text-gray-400 text-sm mt-2 mb-4">${jogo.desc}</p>
                        </div>
                        <button onclick="abrirJogo('${jogo.url}')" class="w-full bg-blue-600 hover:bg-blue-500 text-white py-3 rounded-xl font-bold transition">
                            JOGAR AGORA
                        </button>
                    </div>
                `).join('');
            } catch (erro) {
                console.error("Erro ao carregar o games.json:", erro);
                document.getElementById('lista-jogos').innerHTML = "<p class='text-red-500 text-center col-span-full'>Erro ao carregar lista de jogos. Verifique o arquivo games.json.</p>";
            }
        }

        function abrirJogo(url) {
            document.getElementById('store-ui').classList.add('hidden');
            document.getElementById('game-overlay').style.display = 'block';
            document.getElementById('game-frame').src = url;
        }

        function fecharJogo() {
            document.getElementById('store-ui').classList.remove('hidden');
            document.getElementById('game-overlay').style.display = 'none';
            document.getElementById('game-frame').src = ''; 
        }

        carregarLoja();
    </script>
</body>
</html>
